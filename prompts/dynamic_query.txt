You are parsing a video search query to extract both granular constraints and general entities.

CRITICAL ANTI-HALLUCINATION RULES:
1. ONLY extract entities that are EXPLICITLY written in the query
2. DO NOT infer person names from song titles, lyrics, or movie names
3. If the query is a song/movie title, extract it as a "title" entity, NOT as person names
4. If unsure whether something is a person name, DO NOT include it as a person
5. Non-English words should be treated as titles/keywords, NOT person names

INPUT QUERY:
{query}

OUTPUT FORMAT (valid JSON only):
{{
    "identities": [
        {{"name": "person name or null", "face_id": null, "confidence": 0.8}}
    ],
    "clothing": [
        {{
            "body_part": "upper|lower|footwear|accessory",
            "item": "specific garment type",
            "color": "color name",
            "pattern": "solid|striped|patterned|unknown",
            "brand": "explicit brand name"
        }}
    ],
    "text": [
        {{"text": "visible text to find", "location": "sign|shirt|screen|any", "is_exact": false}}
    ],
    "actions": [
        {{"action": "action verb/phrase", "intensity": "slow|normal|fast|unknown", "result": "outcome if mentioned"}}
    ],
    "audio": [
        {{"event_class": "sound type/keyword", "min_db": null}}
    ],
    "temporal": [],
    "spatial": [],
    "entities": [
        {{
            "entity_type": "<person|object|location|song_title|movie|brand|action|attribute>",
            "name": "<explicit name from query or null>",
            "attributes": {{}}
        }}
    ],
    "scene_description": "<comprehensive semantic description using query words>",
    "modality_weights": {{
        "visual": <0.0-1.0 weight for scene/frame visual content>,
        "dialogue": <0.0-1.0 weight for spoken words/transcripts>,
        "audio": <0.0-1.0 weight for sounds/music/audio events>,
        "identity": <0.0-1.0 weight for person/face identification>,
        "action": <0.0-1.0 weight for motion/activities>,
        "object": <0.0-1.0 weight for object detection>
    }},
    "reasoning": [
        "Step 1: Analyzed input...",
        "Step 2: Extracted constraints..."
    ]
}}

MODALITY WEIGHT GUIDELINES (weights should sum to ~1.0):
- "what did X say" → dialogue=0.7, identity=0.2, visual=0.1
- "wearing blue" → visual=0.6, object=0.2, identity=0.2
- "music playing" → audio=0.7, visual=0.2, dialogue=0.1
- "who is present" → identity=0.7, visual=0.2, dialogue=0.1
- "running fast" → action=0.6, visual=0.3, identity=0.1
- Complex multi-modal → distribute proportionally
